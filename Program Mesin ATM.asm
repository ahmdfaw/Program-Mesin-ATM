INCLUDE 'emu8086.inc'
.model small
.stack 100h
.DATA

MSG1    DB 10,13,'SELAMAT DATANG DI PROGRAM ATM $'
MSG2    DB 10,13,'SILAHKAN PILIH KEGIATAN YANG INGIN ANDA LAKUKAN :$'
MSG3    DB 10,13,'1 SETOR UANG$'
MSG4    DB 10,13,'2 TRANSFER UANG$'
MSG5    DB 10,13,'3 TARIK UANG$'
MSG6    DB 10,13,'4 CEK SALDO$'
MSG7    DB 10,13,'5 KELUAR DARI PROGRAM$'
MSG8    DB 10,13,'MASUKKAN PILIHAN ANDA : $'
MSG9    DB 10,13,'MASUKKAN JUMLAH UANG  : $'
MSG10   DB 10,13,'SILAHKAN MASUKKAN JUMLAH : <DALAM RUPIAH>$'
MSG11   DB 10,13,'1 Rp 50.000,-$'
MSG12   DB 10,13,'2 Rp 100.000,-$'
MSG13   DB 10,13,'3 Rp 200.000,-$'
MSG14   DB 10,13,'4 Rp 500.000,-$'
MSG15   DB 10,13,'5 Rp 1.000.000,-$'
MSG16   DB 10,13,'SALDO ANDA : Rp 10,000.000,-$'
MSG17   DB 10,13,'SALDO ANDA <DALAM Rp x 10^3> : $'
MSG18   DB 10,13,'LANJUT?$'
MSG19   DB 10,13,'1 YA$'
MSG20   DB 10,13,'2 TIDAK$'

.code

DISPLAY MACRO PESAN
MOV AH,09H
LEA DX,PESAN
INT 21H
ENDM

DEFINE_PRINT_NUM
DEFINE_PRINT_NUM_UNS

START:
MOV AX,00H
MOV CX,1388H
MOV SI,00H
MOV AX, DATA
MOV DS,AX

DISPLAY MSG1
DISPLAY MSG2
DISPLAY MSG16
DISPLAY MSG3
DISPLAY MSG4
DISPLAY MSG5
DISPLAY MSG6
DISPLAY MSG7
DISPLAY MSG8

MOV AH,01H
INT 21H

INPUT:
CMP AL,'1'
JE SETOR

CMP AL,'2'
JE TRANSFER

CMP AL,'3'
JE TARIK

CMP AL,'4'
JE CEK

CMP AL,'5'
JE KELUAR

HITUNGJUMLAH1:
ADD CX,32H
MOV AX,CX
JMP HASIL

HITUNGJUMLAH2:
ADD CX,64H
MOV AX,CX
JMP HASIL

HITUNGJUMLAH3:
ADD CX,0C8H
MOV AX,CX
JMP HASIL

HITUNGJUMLAH4:
ADD CX,1F4H
MOV AX,CX
JMP HASIL

HITUNGJUMLAH5:
ADD CX,3E8H
MOV AX,CX
JMP HASIL

HITUNGKURANG1:
SUB CX,32H
MOV AX,CX
JMP HASIL

HITUNGKURANG2:
SUB CX,64H
MOV AX,CX
JMP HASIL

HITUNGKURANG3:
SUB CX,0C8H
MOV AX,CX
JMP HASIL

HITUNGKURANG4:
SUB CX,1F4H
MOV AX,CX
JMP HASIL

HITUNGKURANG5:
SUB CX,3E8H
MOV AX,CX
JMP HASIL

HASIL:
DISPLAY MSG17
MOV AX,CX
CALL PRINT_NUM
DISPLAY MSG18
DISPLAY MSG19
DISPLAY MSG20

MOV AH,01H
INT 21H
CMP AL,'1'
JE ULANG

CMP AL,'2'
JE KELUAR

JMP START

SETOR:
MOV AH,00H
MOV AL,03H
INT 10H
DISPLAY MSG9
DISPLAY MSG10
DISPLAY MSG11
DISPLAY MSG12
DISPLAY MSG13
DISPLAY MSG14
DISPLAY MSG15
MOV AH,01H
INT 21H
CMP AL,'1'
JE HITUNGJUMLAH1

CMP AL,'2'
JE HITUNGJUMLAH2

CMP AL,'3'
JE HITUNGJUMLAH3

CMP AL,'4'
JE HITUNGJUMLAH4

CMP AL,'5'
JE HITUNGJUMLAH5

TRANSFER:
MOV AH,00H
MOV AL,03H
INT 10H
DISPLAY MSG9
DISPLAY MSG10
DISPLAY MSG11
DISPLAY MSG12
DISPLAY MSG13
DISPLAY MSG14
DISPLAY MSG15
MOV AH,01H
INT 21H
CMP AL,'1'
JE HITUNGKURANG1

CMP AL,'2'
JE HITUNGKURANG2

CMP AL,'3'
JE HITUNGKURANG3

CMP AL,'4'
JE HITUNGKURANG4

CMP AL,'5'
JE HITUNGKURANG5

TARIK:
MOV AH,00H
MOV AL,03H
INT 10H
DISPLAY MSG9
DISPLAY MSG10
DISPLAY MSG11
DISPLAY MSG12
DISPLAY MSG13
DISPLAY MSG14
DISPLAY MSG15
MOV AH,01H
INT 21H
CMP AL,'1'
JE HITUNGKURANG1

CMP AL,'2'
JE HITUNGKURANG2

CMP AL,'3'
JE HITUNGKURANG3

CMP AL,'4'
JE HITUNGKURANG4

CMP AL,'5'
JE HITUNGKURANG5

CEK:
MOV AH,00H
MOV AL,03H
INT 10H
JMP HASIL

ULANG:
MOV AH,00H
MOV AL,03H
INT 10H
DISPLAY MSG1
DISPLAY MSG2
DISPLAY MSG3
DISPLAY MSG4
DISPLAY MSG5
DISPLAY MSG6
DISPLAY MSG7
DISPLAY MSG8
MOV AH,01H
INT 21H
JMP INPUT

KELUAR:
END START